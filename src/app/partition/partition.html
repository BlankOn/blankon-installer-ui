<div class="row">
  <div class="columns content">
          <h1>{{title}} <small ng-show="advancedPartition">Partition Editor</small></h1>
    <p ng-hide="devices[0]" class="fade">Please wait while your sistem is being scanned... </p>
    <p ng-show="devices[0] && !advancedPartition" class="fade"><a class="button dropdown" dropdown-toggle="#drive-selection"><span ng-show="!selectedDrive">Select drive...</span><span ng-show="selectedDrive">{{selectedDrive.model}}</span></a><p>
    <ul id="drive-selection" class="f-dropdown">
      <li ng-repeat="drive in devices">
      <a ng-click="setDrive(drive.path)">{{drive.model}}</a>
      </li>
    </ul>
    <div ng-hide="advancedPartition" class="fade">
      <p ng-show="selectedDrive" class="fade">Please choose the partition on device below which you would like to install BlankOn into or use advanced partitioning tool for more control.<br>
      </p>
      <div class="top-bar-partition" style="width:{{selectedDrive.driveWidth}}px" ng-show="selectedDrive" class="fade">
        <span class="legend-partition-normal">Used</span>
        <span class="legend-partition-disallow">Too small</span>
        <span class="legend-partition-freespace">Free space</span>
        <a class="button tiny right" ng-click="switchToAdvancedPartition()">Enter Advanced Mode</button>
      </div>
      <div class="drive-block fade" ng-show="selectedDrive" style="width:{{selectedDrive.driveWidth}}px !important;">
        <a href="" ng-repeat="partition in selectedDrive.partitionList" ng-hide="partition.hidden" class="partition-block" ng-click="selectInstallationTarget(selectedDrive.id, partition)" ng-class="{selected:partition.selected, disallow:partition.disallow, freespace:partition.freespace, normal:partition.normal, extended:partition.extended}">
          <span class="pop fade" style="color:white">
           Size : {{partition.sizeGb}} GB<br>
           File System : {{partition.filesystem}}<br>
           {{partition.description}}
          </span>
          <div style="width:{{partition.blockWidth}}px;">
          </div>
        </a>
      </div>
      <div ng-show="validInstallationTarget">
        <br>
        <p>
        You are choosing {{selectedInstallationTarget}} to be installed with BlankOn.<br>
        <strong>WARNING : </strong>
      The selected partition will be wiped out. Swap partition will be created if you don't have one.
      </p>
      </div>
    </div>
    <div ng-show="advancedPartition && !actionDialog" class="fade">
        <div class="top-bar-partition" style="width:{{selectedDrive.driveWidth}}px">
        <span ng-show="selectedDrive" class="legend-partition-normal">Primary</span>
        <span ng-show="selectedDrive" class="legend-partition-logical">Logicall</span>
        <span ng-show="selectedDrive" class="legend-partition-freespace">Free space</span>
        <a class="button tiny right"><span >Apply</span></a>
        <a class="button tiny right" ng-click="redo()"><span >Redo</span></a>
        <a class="button tiny right" ng-click="undo()"><span >Undo</span></a>
        <a class="button tiny right" ng-click="switchToSimplePartition()"><span >Exit Advanced Mode</span></a>
      </div>
      <div class="drive-block" ng-show="selectedDrive" style="width:{{selectedDrive.driveWidth}}px !important;">
        <div ng-repeat="partition in selectedDrive.partitionList"><a href=""  ng-hide="partition.hidden" class="partition-block" ng-class="{selected:partition.selected, freespace:partition.freespace, normal:partition.normal, extended:partition.extended, logical:partition.logical}" ng-mouseover="highlight(partition)" ng-mouseleave="unhighlight(partition)">
          <div style="width:{{partition.blockWidth}}px;">
          </div>
        </a>
      </div>
      </div>
      <table style="margin-top:10px;width:{{selectedDrive.driveWidth}}px">
              <tr>
                <td>Partition</td>
                <td>File System</td>
                <td>Mount Point</td>
                <td>Size</td>
                <!--td>Used</td>
                <td>Unused</td-->
              </tr>
              <tr ng-repeat="partition in selectedDrive.partitionList" ng-hide="partition.hidden" ng-class="{highlight:partition.highlighted}">
                <td class="td-partition" ng-show="partition.id > 0">
                  {{selectedDrive.path}}/{{partition.id}}</td>
                <td class="td-partition" ng-show="partition.id < 0">Unallocated</td>
                <td class="td-partition" ng-show="partition.id > 0 && !partition.format">{{partition.filesystem}} <span ng-show="partition.extended">Extended</span></td>
                <td class="td-partition" ng-show="partition.id > 0 && partition.format">Format as ext4</td>
                <td class="td-partition" ng-show="partition.id < 0">-</td>
                <td class="td-partition"><span ng-hide="partition.extended">{{partition.mountpoint}}</span></td>
                <td class="td-partition"><span ng-hide="partition.extended">{{partition.sizeGb}} GB</td>
                 <!--td class="td-partition"><span ng-hide="partition.extended">{{partition.used}}</span></td>
                 <td class="td-partition"><span ng-hide="partition.extended">{{partition.unused}}</span></td-->
                <td class="td-partition" ng-show="partition.id < 0 && !partition.extended">
                   <a class="button tiny partoedi-button" ng-click="partitionCreate(partition)"><span >Create</span></a>
                </a>
                <td class="td-partition" ng-show="partition.id > 0">
                   <a class="button tiny dropdown partoedi-button" dropdown-toggle="#action-{{partition.id}}" ng-hide="partition.extended"><span >Action</span></a>
                   <ul id="action-{{partition.id}}" class="f-dropdown" ng-show="partition.id > 0">
                     <li ng-show="partition.id > 0">
                      <a ng-click="partitionDelete(partition)">Delete</a>
                     </li>
                     <li ng-show="partition.id > 0">
                      <a ng-click="partitionFormat(partition)">Format</a>
                     </li>
                     <li ng-show="partition.id > 0">
                      <a ng-click="mount(partition)">Mount Point</a>
                     </li>
                   </ul>
                </td>
              </tr>
      </table>
    </div>
    <div ng-show="createDialog" class="fade">
      <h2>Create Partition</h2>
      <p>{{createDialogSelected.sizeGb}} GB available. Sector {{createDialogSelected.start}} - {{createDialogSelected.start}}</p>
      <div style="height:75px">
      <input ng-model="createSliderValue"  type="text" id="createSlider" slider options="createSliderOptions"/>
      </div>
      <div class="partoedi-action-dialog-form">
        <div class="row small-8">
          <div class="small-4 columns">
            <label class="right inline">Size</label>
          </div>
          <div class="small-8 columns">
            <input type="text"/ value="{{createDialogSelected.sizeGb}} GB" disabled>
          </div>
        </div>
        <div class="row small-8">
          <div class="small-4 columns">
            <label class="right inline">Mount point</label>
          </div>
          <div class="small-8 columns">
            <select ng-model="createDialogSelected.mountPoint">
              <option value="none" selected>Without mount point</option>
              <option value="root">/</option>
              <option value="home">/home</option>
            </select>
          </div>
        </div>
      </div>
      <button class='button' ng-click="partitionCreateCancel()">Cancel</button>
      <button class='button' ng-click="partitionCreateApply(createDialogSelected)">Apply</button>

    </div>
  </div>
  <div class="columns nav-button" ng-show="devices[0] && !actionDialog && !advancedPartition">
    <button class='button' ng-click="previous()">Previous</button>
    <button class="button" ng-class="{disabled:!validInstallationTarget}" ng-click="next()">Next</button>
  </div>
</div>
